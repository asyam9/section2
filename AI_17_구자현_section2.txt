안녕하십니까 AI 17기 구자현 입니다.
코드스테이츠 두번째 프로젝트 발표를 시작하겠습니다

이번 주제는 상수도 배관에서 발생하는 소음- 진동 데이터를 활용한
상수도 배관 누수 예측 모델을 개발입니다.
---------------------
첫번째로 프로젝트 설명을 하고
데이터 , 도메인지식에 대한 설명 후, 전처리, 모델링의 순서로 발표하도록 하겠습니다.
---------------------
프로젝트 목적으로는
누수감지센서에서 확보된 데이터와,
누수 탐지사들의 탐지 보고를 토대로 누수 여부를 판단할 수 있는 AI모델을 개발하는 것입니다.
초기 목표로는 90%를 목표로 하였습니다.

해당 모델은 스마트 누수보고 시스템과 연동하여, 누수여부를 자동으로 판단하고 보고할수있는 체계를 구축하는데 사용될 것입니다.

사용 대상으로는 각 지자체, 한국 수자원공사, 한국환경공단에서 사용할것이며,
민간영역에도 활용할 수 있을것이라 예상합니다.
---------------------
데이터는 AIHUB 상수관로 누수감지 데이터를 활용하였으며,
2020년 5만건을 구축하여 2021년 최초공개 된 데이터입니다.
실제 데이터와 전문 누수탐지사들의 탐지 결과가 AI모델링을 위해 가공되어있음을 알려드립니다.
---------------------
데이터 구조로는
위치 구분을 위한 사이트 번호, 센서번호가 있고,
날짜 데이터인 누수감지일자가 있으며,
누수확률, 누수레벨값이 있습니다.
타겟컬럼으로 활용될 누수감지 타입 구분과
---------------------
감지 주파수 범위별 진동크기, 최대누수 주파수와 크기 값으로 
컬럼이 구성되어있습니다.
---------------------
전체적으로 총 5만건의 데이터가 있으며,
 누수감지 데이터 40프로, 미감지 데이터 60프로로 되어있습니다.
---------------------
도메인 지식을 먼저 설명드리도록 하겠습니다.
보통 탐사장비로는 청음탐지기, 적외선 탐지기, 가스탐지기, 상관식 탐지기 등이 있으나
모든 장비들에는 장단점이 있기 때문에 정확한 탐지를 위해서라면 여러 장비를 사용하여
탐지를 진행하여야 합니다. 
하지만 탐지 장비가 고가이다보니 탐지 업체들이 보유한 장비는 제한적이기 때문에 탐지에 실패하는경우도 상당합니다.
그중에서 가장 저렴한 청음탐지기와 같은 원리를 이용한 센서를 바탕으로 해당 사업이 추진되었습니다.
---------------------
누수탐지기사가 탐지를 할때 보통 청음 탐지기로 탐지를 합니다.
광역적으로 쉽게 탐지할수있는 수단이지만, 땅속에 뭍혀있는 상수도관의 경우 다른 지형지물등에 의해
진동의 감쇠나 변형이 일어나 쉽게 탐지할 수 없는 경우가 많습니다.
하지만 배관에 직접 연결된 매설 센서의 경우, 진동을 정확하게 측정하여 데이터로 전송할 수 있기 때문에
지속적인 유지관리의 단점을 갖고서라도 해당 프로젝트를 시도해 볼만 하다 생각합니다.
---------------------
우선 데이터를 전처리 하여야 하는데
이미 모델링을 위해 정제된 데이터라 결측치는 존재하지 않았습니다.
다양한 환경에서 나온 데이터라 이상치에 대한 판단은 하지 않기로 하였습니다.
필요한 컬럼은 피처값인 헤르츠로 기록된 컬럼들과
릭타입 컬럼을 타겟값으로 하고 나머지 컬럼들은 필요없거나 
결과값에 해당하므로 제거하도록 하였습니다.
---------------------
우선 샘플 데이터를 보시겠습니다

---------------------
릭타입별로 데이터에 차이가 있는지 우선 알아보고자
각 타입별로 평균을 그래프로 그려보았습니다.
위 두 타입이 누수데이터이고, 아래 세 데이터가 누수가 아닌 타입입니다.
누수가 아닐시에는 뾰족한 모양을 하고있지만
누수가 발생되면 넓은 범위로 피크치가 생성되는것을 보실수 있습니다.
---------------------
누수, 비누수 타입으로 합하여 강도의 평균값을 내어보았고
그 강도 차이를 그래프로 표현해 보았습니다.
---------------------
모델링 적용 기법으로는 
분류 문제이기 때문에 XGBOOST를 활용하였습니다.
피쳐값들이 연속적인 숫자이므로 민맥스스케일링을 우선 적용해 보았습니다.
샘플 데이터 수가 충분하고 시간이 오래걸려 크로스 밸리데이션은 사용하지 않았습니다.
---------------------
민맥스 스케일링을 적용한 기준모델의 경우 정확도에서 0.81이 나왔습니다.
---------------------
컨퓨전 매트릭스와 피쳐 임포턴스 상위값들을 출력 해 보았습니다.
---------------------
피쳐 임포턴스와 아까 출력해 보았던 누수- 비누수 차이 그래프를 비교해 보았습니다.
그래프 Y값이 커질수록 임포턴스가 증가하는 경향을 확인 할 수 있었습니다.
---------------------
기준모델을 생성한 결과, 전체 데이터에 대한 모델링을 한번 하는데 2시간정도가 소요되어 
다른 방법을 생각해 보아야 했습니다.
도메인 조사결과 일반적인 배관들은 누수음의 범위가 존재하였습니다.
대체로 2000HZ이하값들이었기 때문에 이 점을 이용하여 HZ값을 제한한 일부 데이터만을 
사용하여 테스트 해 보기로 하였습니다.
그래프상 1000HZ 이하의 데이터가 유의미하다고 가정하고,
같은 모델로 테스트를 진행하여 기준모델과 비교해 보았습니다.
---------------------
그 결과 0.81이었던 정확도 값이 0.86으로 증가한 것을 볼 수 있습니다.
피쳐임포턴스값을 출력해 보았을때 기준모델의 상위값들과 동일한 것을 알 수 있습니다.
---------------------
이 모델을 기준으로 인코더 적용과 하이퍼파라메터값들을 변경해 보았습니다.
컬럼이 많기 때문에 맥스뎁스값을 12로 늘려보고,
러닝레이트를 낮추었습니다.
알파값과 바이트리값을 약간 변경하여 과적합을 방지하였습니다.

그 결과 정확도를 0.94까지 상승 시킬수 있었습니다.
---------------------
컨퓨전 매트릭스에서 양 끝의 값이 누수된 데이터이고, 
가운데 세 컬럼이 누수되지 않은 데이터이므로 
실제로 누수여부만 판단한다면, 정확도는 0.94보다 높겠지만,
각 값들은 사용 기관들의 대응에 차이가 있기 때문에 결합하지 않기로 하였습니다.
---------------------
결론으로는 누수 탐지기사와 비교하였을때 94% 정확도의 예측모델이 생성되었습니다.
실제 누수 결과가 아닌 탐지기사의 의견값과 비교한 값이므로 실제 누수탐지율은 이보다 조금더 떨어질 것으로 예측됩니다.
어째건 이를 통해 누수 탐지사들을 우선적으로 해당지점에 배치하여 빠른 대응으로 인력예산과 손실을 줄일 수 있을것으로 판단합니다.
추가적으로, 굴착 후 누수여부를 데이터셋에 업데이트 하여 모델링을 다시 한다면 더 좋은 모델을 만들수 있을것이라 생각합니다.
그리고 누수량에 대한 업데이트도 있다면, 누수지점들중에 어떤곳을 우선적으로 해결해야 하는지 결정을 내릴수 있을것이며,
그 지점을 우선 대응한다면 손실을 더욱 줄이고 사고위험도 대비할수 있다고 생각합니다.
---------------------
이상 AI 17기 구자현의 발표를 마치도록 하겠습니다.






















